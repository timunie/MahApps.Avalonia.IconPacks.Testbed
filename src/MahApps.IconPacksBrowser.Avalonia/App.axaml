<Application x:Class="MahApps.IconPacksBrowser.Avalonia.App"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:fa="clr-namespace:FluentAvalonia.Styling;assembly=FluentAvalonia"
             xmlns:iconPacks="https://github.com/MahApps/IconPacks.Avalonia"
             xmlns:viewModels="clr-namespace:MahApps.IconPacksBrowser.Avalonia.ViewModels"
             xmlns:properties="clr-namespace:MahApps.IconPacksBrowser.Avalonia.Properties"
             xmlns:controls="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia"
             RequestedThemeVariant="{Binding Source={x:Static properties:Settings.Default}, Path=AppTheme}">
    <!--  "Default" ThemeVariant follows system theme variant. "Dark" or "Light" are other available options.  -->

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceInclude Source="/Styles/ButtonStyles.axaml" />
                <ResourceInclude Source="/Styles/ListBoxStyles.axaml" />
                <ResourceInclude Source="/Styles/HeaderedControlStyles.axaml" />
                <ResourceInclude Source="/Styles/PropertyResizerStyles.axaml" />
                <ResourceInclude Source="/Styles/TextBoxStyles.axaml" />
            </ResourceDictionary.MergedDictionaries>

            <DataTemplate x:Key="IconPacksBrowser.DataTemplates.ListBox.IconViewModel" DataType="viewModels:IIconViewModel">
                <Grid x:Name="Root"
                      Width="128"
                      Height="128"
                      Background="Transparent"
                      RowDefinitions="*,Auto">

                    <Grid.ContextFlyout>
                        <MenuFlyout>
                            <MenuItem Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardTextCommand}"
                                      CommandParameter="{Binding}"
                                      Header="{Binding Value, StringFormat='{}Copy {0} to clipboard as element'}">
                                <MenuItem.Icon>
                                    <StackPanel Orientation="Horizontal">
                                        <iconPacks:PackIconBoxIcons Width="7"
                                                                    Margin="1,0"
                                                                    Kind="RegularChevronLeft" />
                                        <iconPacks:PackIconBoxIcons Width="7"
                                                                    Margin="1,0"
                                                                    Kind="RegularChevronRight" />
                                    </StackPanel>
                                </MenuItem.Icon>
                            </MenuItem>

                            <MenuItem Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardAsContentTextCommand}"
                                      CommandParameter="{Binding}"
                                      Header="{Binding Value, StringFormat='{}Copy {0} to clipboard as content'}"
                                      Icon="{iconPacks:BoxIcons Width=14,
                                                                Height=14,
                                                                Kind=RegularBracket}" />

                            <MenuItem Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardAsPathIconTextCommand}"
                                      CommandParameter="{Binding}"
                                      Header="{Binding Value, StringFormat='{}Copy {0} to clipboard as PathIcon element'}"
                                      Icon="{iconPacks:BoxIcons Kind=RegularPolygon,
                                                                Width=14,
                                                                Height=14}" />

                            <MenuItem Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardAsGeometryTextCommand}"
                                      CommandParameter="{Binding}"
                                      Header="{Binding Value, StringFormat='{}Copy {0} to clipboard as Geometry'}"
                                      Icon="{iconPacks:BoxIcons Kind=RegularPencil,
                                                                Width=14,
                                                                Height=14}" />
                            
                            <Separator />

                            <MenuItem Header="View IconPack-Website" 
                                      Command="{Binding LaunchUriCommand, Source={x:Static viewModels:MainViewModel.Instance}}"
                                      CommandParameter="{Binding MetaData.ProjectUrl, Mode=OneWay}" 
                                      Icon="{iconPacks:Octicons Kind=LinkExternal, Width=14, Height=14}"/>
                            
                            <MenuItem Header="View IconPack-License" 
                                      Command="{Binding LaunchUriCommand, Source={x:Static viewModels:MainViewModel.Instance}}"
                                      CommandParameter="{Binding MetaData.LicenseUrl, Mode=OneWay}" 
                                      Icon="{iconPacks:Octicons Kind=Law, Width=14, Height=14}"/>
                        </MenuFlyout>
                    </Grid.ContextFlyout>

                    <iconPacks:PackIconControl Grid.Row="0"
                                               Width="48"
                                               Height="48"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Kind="{Binding Value, Mode=OneWay}" />

                    <Grid Grid.Row="0"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Top"
                          Focusable="False">
                        <Grid.IsVisible>
                            <OnPlatform>
                                <OnPlatform.Default>
                                    <Binding Path="$parent[ListBoxItem].IsPointerOver" />
                                </OnPlatform.Default>
                                <OnPlatform.Android>
                                    <Binding Path="$parent[ListBoxItem].IsSelected" />
                                </OnPlatform.Android>
                                <OnPlatform.iOS>
                                    <Binding Path="$parent[ListBoxItem].IsSelected" />
                                </OnPlatform.iOS>
                            </OnPlatform>
                        </Grid.IsVisible>

                        <Rectangle RadiusX="11" RadiusY="11">
                            <Rectangle.Fill>
                                <SolidColorBrush Opacity=".5" Color="{DynamicResource SystemAccentColor}" />
                            </Rectangle.Fill>
                        </Rectangle>
                        <StackPanel Margin="11,0" Orientation="Horizontal">
                            <Button Width="22"
                                    Height="22"
                                    Margin="2"
                                    Padding="0"
                                    HorizontalAlignment="Center"
                                    BorderThickness="0"
                                    Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardTextCommand}"
                                    CommandParameter="{Binding}"
                                    Focusable="False"
                                    IsTabStop="False">
                                <ToolTip.Tip>
                                    <TextBlock Text="{Binding Value, StringFormat='{}Copy {0} to clipboard as element'}" />
                                </ToolTip.Tip>
                                <StackPanel Orientation="Horizontal">
                                    <iconPacks:PackIconBoxIcons Width="7"
                                                                Margin="1,0"
                                                                Kind="RegularChevronLeft" />
                                    <iconPacks:PackIconBoxIcons Width="7"
                                                                Margin="1,0"
                                                                Kind="RegularChevronRight" />
                                </StackPanel>
                            </Button>
                            <Button Width="22"
                                    Height="22"
                                    Margin="2"
                                    Padding="0"
                                    BorderThickness="0"
                                    Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardAsContentTextCommand}"
                                    CommandParameter="{Binding}"
                                    Focusable="False"
                                    IsTabStop="False">
                                <ToolTip.Tip>
                                    <TextBlock Text="{Binding Value, StringFormat='{}Copy {0} to clipboard as content'}" />
                                </ToolTip.Tip>
                                <iconPacks:PackIconBoxIcons Width="14"
                                                            Height="14"
                                                            Kind="RegularBracket" />
                            </Button>
                            <Button Width="22"
                                    Height="22"
                                    Margin="2"
                                    Padding="0"
                                    BorderThickness="0"
                                    Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardAsPathIconTextCommand}"
                                    CommandParameter="{Binding}"
                                    Focusable="False"
                                    IsTabStop="False">
                                <ToolTip.Tip>
                                    <TextBlock Text="{Binding Value, StringFormat='{}Copy {0} to clipboard as PathIcon element'}" />
                                </ToolTip.Tip>
                                <iconPacks:PackIconBoxIcons Width="14"
                                                            Height="14"
                                                            Kind="RegularPolygon" />
                            </Button>
                            <Button Width="22"
                                    Height="22"
                                    Margin="2"
                                    Padding="0"
                                    BorderThickness="0"
                                    Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardAsGeometryTextCommand}"
                                    CommandParameter="{Binding}"
                                    Focusable="False"
                                    IsTabStop="False">
                                <ToolTip.Tip>
                                    <TextBlock Text="{Binding Value, StringFormat='{}Copy {0} to clipboard as Geometry'}" />
                                </ToolTip.Tip>
                                <iconPacks:PackIconBoxIcons Width="14"
                                                            Height="14"
                                                            Kind="RegularPencil" />
                            </Button>
                        </StackPanel>
                    </Grid>

                    <TextBlock Grid.Row="1"
                               Margin="2"
                               HorizontalAlignment="Center"
                               Text="{Binding Name, Mode=OneWay}"
                               TextTrimming="CharacterEllipsis" />
                </Grid>
            </DataTemplate>

            <DataTemplate x:Key="IconPacksBrowser.DataTemplates.ItemsRepeater.IconViewModel" DataType="viewModels:IIconViewModel">
                <ContentControl Content="{Binding}">
                    <ContentControl.Theme>
                        <ControlTheme TargetType="ContentControl">
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Padding" Value="{DynamicResource ListBoxItemPadding}" />
                            <Setter Property="Template">
                                <ControlTemplate>
                                    <ContentPresenter Name="PART_ContentPresenter"
                                                      Padding="{TemplateBinding Padding}"
                                                      HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                      VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                      Background="{TemplateBinding Background}"
                                                      BorderBrush="{TemplateBinding BorderBrush}"
                                                      BorderThickness="{TemplateBinding BorderThickness}"
                                                      Content="{TemplateBinding Content}"
                                                      ContentTemplate="{TemplateBinding ContentTemplate}"
                                                      CornerRadius="{TemplateBinding CornerRadius}" />
                                </ControlTemplate>
                            </Setter>

                            <Style Selector="^:disabled /template/ ContentPresenter#PART_ContentPresenter">
                                <Setter Property="Foreground" Value="{DynamicResource SystemControlDisabledBaseMediumLowBrush}" />
                            </Style>

                            <!--  PointerOver State  -->
                            <Style Selector="^:pointerover /template/ ContentPresenter#PART_ContentPresenter">
                                <Setter Property="Background" Value="Gainsboro" />
                                <Setter Property="Foreground" Value="{DynamicResource SystemAccentColor}" />
                            </Style>
                        </ControlTheme>
                    </ContentControl.Theme>
                    <ContentControl.ContentTemplate>
                        <DataTemplate DataType="viewModels:IIconViewModel">
                            <Grid x:Name="Root"
                                  Width="128"
                                  Height="128"
                                  Background="Transparent">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <iconPacks:PackIconControl Grid.Row="0"
                                                           Width="48"
                                                           Height="48"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Center"
                                                           Kind="{Binding Value, Mode=OneWay}" />
                                <!--  IsVisible="{Binding $parent[ListBoxItem].IsSelected}">  -->
                                <Grid Grid.Row="0"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Top"
                                      Focusable="False"
                                      IsVisible="False">
                                    <Rectangle RadiusX="11" RadiusY="11">
                                        <Rectangle.Fill>
                                            <SolidColorBrush Opacity=".2" Color="{DynamicResource MahApps.Colors.ThemeBackground}" />
                                        </Rectangle.Fill>
                                    </Rectangle>
                                    <StackPanel Margin="11,0" Orientation="Horizontal">
                                        <Button Width="22"
                                                Height="22"
                                                HorizontalAlignment="Center"
                                                BorderThickness="0"
                                                Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardTextCommand}"
                                                CommandParameter="{Binding}"
                                                Focusable="False"
                                                IsTabStop="False">
                                            <ToolTip.Tip>
                                                <TextBlock Text="{Binding Value, StringFormat='{}Copy {0} to clipboard as element'}" />
                                            </ToolTip.Tip>
                                            <StackPanel Orientation="Horizontal">
                                                <iconPacks:PackIconBoxIcons Width="7"
                                                                            Margin="1,0"
                                                                            Kind="RegularChevronLeft" />
                                                <iconPacks:PackIconBoxIcons Width="7"
                                                                            Margin="1,0"
                                                                            Kind="RegularChevronRight" />
                                            </StackPanel>
                                        </Button>
                                        <Button Width="22"
                                                Height="22"
                                                BorderThickness="0"
                                                Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardAsContentTextCommand}"
                                                CommandParameter="{Binding}"
                                                Focusable="False"
                                                IsTabStop="False">
                                            <ToolTip.Tip>
                                                <TextBlock Text="{Binding Value, StringFormat='{}Copy {0} to clipboard as content'}" />
                                            </ToolTip.Tip>
                                            <iconPacks:PackIconBoxIcons Width="14"
                                                                        Height="14"
                                                                        Kind="RegularBracket" />
                                        </Button>
                                        <Button Width="22"
                                                Height="22"
                                                BorderThickness="0"
                                                Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardAsPathIconTextCommand}"
                                                CommandParameter="{Binding}"
                                                Focusable="False"
                                                IsTabStop="False">
                                            <ToolTip.Tip>
                                                <TextBlock Text="{Binding Value, StringFormat='{}Copy {0} to clipboard as PathIcon element'}" />
                                            </ToolTip.Tip>
                                            <iconPacks:PackIconBoxIcons Width="14"
                                                                        Height="14"
                                                                        Kind="RegularPolygon" />
                                        </Button>
                                        <Button Width="22"
                                                Height="22"
                                                BorderThickness="0"
                                                Command="{Binding Source={x:Static viewModels:MainViewModel.Instance}, Path=CopyToClipboardAsGeometryTextCommand}"
                                                CommandParameter="{Binding}"
                                                Focusable="False"
                                                IsTabStop="False">
                                            <ToolTip.Tip>
                                                <TextBlock Text="{Binding Value, StringFormat='{}Copy {0} to clipboard as Geometry'}" />
                                            </ToolTip.Tip>
                                            <iconPacks:PackIconBoxIcons Width="14"
                                                                        Height="14"
                                                                        Kind="RegularPencil" />
                                        </Button>
                                    </StackPanel>
                                </Grid>
                                <TextBlock Grid.Row="1"
                                           Margin="2"
                                           HorizontalAlignment="Center"
                                           Text="{Binding Name, Mode=OneWay}"
                                           TextTrimming="CharacterEllipsis" />
                            </Grid>
                        </DataTemplate>
                    </ContentControl.ContentTemplate>
                </ContentControl>

            </DataTemplate>
            
            <controls:PathIconSource x:Key="AboutIcon" 
                                     Data="M59 49L69 49L69 39L59 39M64 104C41.95 104 24 86.05 24 64C24 41.95 41.95 24 64 24C86.05 24 104 41.95 104 64C104 86.05 86.05 104 64 104M64 14Q62.7726 14 61.5466 14.0602Q60.3207 14.1205 59.0991 14.2408Q57.8776 14.3611 56.6635 14.5412Q55.4493 14.7213 54.2455 14.9607Q53.0416 15.2002 51.851 15.4984Q50.6603 15.7967 49.4858 16.153Q48.3112 16.5093 47.1555 16.9228Q45.9998 17.3363 44.8658 17.806Q43.7318 18.2757 42.6222 18.8005Q41.5127 19.3253 40.4302 19.9039Q39.3477 20.4825 38.2949 21.1136Q37.2421 21.7446 36.2215 22.4265Q35.2009 23.1084 34.215 23.8396Q33.2292 24.5708 32.2803 25.3495Q31.3315 26.1282 30.4221 26.9524Q29.5126 27.7767 28.6447 28.6447Q27.7767 29.5126 26.9524 30.4221Q26.1282 31.3315 25.3495 32.2803Q24.5708 33.2292 23.8396 34.215Q23.1084 35.2009 22.4265 36.2215Q21.7446 37.2421 21.1136 38.2949Q20.4825 39.3477 19.9039 40.4302Q19.3253 41.5127 18.8005 42.6222Q18.2757 43.7318 17.806 44.8658Q17.3363 45.9998 16.9228 47.1555Q16.5093 48.3112 16.153 49.4858Q15.7967 50.6603 15.4984 51.851Q15.2002 53.0416 14.9607 54.2455Q14.7213 55.4493 14.5412 56.6635Q14.3611 57.8776 14.2408 59.0991Q14.1205 60.3207 14.0602 61.5466Q14 62.7726 14 64Q14 65.2274 14.0602 66.4534Q14.1205 67.6793 14.2408 68.9009Q14.3611 70.1224 14.5412 71.3365Q14.7213 72.5507 14.9607 73.7545Q15.2002 74.9584 15.4984 76.149Q15.7967 77.3397 16.153 78.5142Q16.5093 79.6888 16.9228 80.8445Q17.3363 82.0002 17.806 83.1342Q18.2757 84.2682 18.8005 85.3777Q19.3253 86.4873 19.9039 87.5698Q20.4825 88.6523 21.1136 89.7051Q21.7446 90.7579 22.4265 91.7785Q23.1084 92.7991 23.8396 93.785Q24.5708 94.7708 25.3495 95.7197Q26.1282 96.6685 26.9524 97.5779Q27.7767 98.4874 28.6447 99.3553Q29.5126 100.223 30.4221 101.048Q31.3315 101.872 32.2803 102.651Q33.2291 103.429 34.215 104.16Q35.2009 104.892 36.2215 105.573Q37.2421 106.255 38.2949 106.886Q39.3477 107.517 40.4302 108.096Q41.5127 108.675 42.6222 109.199Q43.7318 109.724 44.8658 110.194Q45.9998 110.664 47.1555 111.077Q48.3112 111.491 49.4858 111.847Q50.6603 112.203 51.851 112.502Q53.0416 112.8 54.2455 113.039Q55.4493 113.279 56.6635 113.459Q57.8776 113.639 59.0991 113.759Q60.3207 113.88 61.5466 113.94Q62.7726 114 64 114Q65.2274 114 66.4534 113.94Q67.6793 113.88 68.9009 113.759Q70.1224 113.639 71.3365 113.459Q72.5507 113.279 73.7545 113.039Q74.9584 112.8 76.149 112.502Q77.3397 112.203 78.5142 111.847Q79.6888 111.491 80.8445 111.077Q82.0002 110.664 83.1342 110.194Q84.2682 109.724 85.3777 109.199Q86.4873 108.675 87.5698 108.096Q88.6523 107.517 89.7051 106.886Q90.7579 106.255 91.7785 105.573Q92.7991 104.892 93.785 104.16Q94.7708 103.429 95.7197 102.651Q96.6685 101.872 97.5779 101.048Q98.4874 100.223 99.3553 99.3553Q100.223 98.4874 101.048 97.5779Q101.872 96.6685 102.651 95.7197Q103.429 94.7708 104.16 93.785Q104.892 92.7991 105.573 91.7785Q106.255 90.7579 106.886 89.7051Q107.517 88.6523 108.096 87.5698Q108.675 86.4873 109.199 85.3777Q109.724 84.2682 110.194 83.1342Q110.664 82.0002 111.077 80.8445Q111.491 79.6888 111.847 78.5142Q112.203 77.3397 112.502 76.149Q112.8 74.9584 113.039 73.7545Q113.279 72.5507 113.459 71.3365Q113.639 70.1224 113.759 68.9009Q113.88 67.6793 113.94 66.4534Q114 65.2274 114 64Q114 62.7726 113.94 61.5466Q113.88 60.3207 113.759 59.0991Q113.639 57.8776 113.459 56.6635Q113.279 55.4493 113.039 54.2455Q112.8 53.0416 112.502 51.851Q112.203 50.6603 111.847 49.4858Q111.491 48.3112 111.077 47.1555Q110.664 45.9998 110.194 44.8658Q109.724 43.7318 109.199 42.6222Q108.675 41.5127 108.096 40.4302Q107.517 39.3477 106.886 38.2949Q106.255 37.2421 105.573 36.2215Q104.892 35.2009 104.16 34.215Q103.429 33.2292 102.651 32.2803Q101.872 31.3315 101.048 30.4221Q100.223 29.5126 99.3553 28.6447Q98.4874 27.7767 97.5779 26.9524Q96.6685 26.1282 95.7197 25.3495Q94.7708 24.5708 93.785 23.8396Q92.7991 23.1084 91.7785 22.4265Q90.7579 21.7446 89.7051 21.1136Q88.6523 20.4825 87.5698 19.9039Q86.4873 19.3253 85.3777 18.8005Q84.2682 18.2757 83.1342 17.806Q82.0002 17.3363 80.8445 16.9228Q79.6888 16.5093 78.5142 16.153Q77.3397 15.7967 76.149 15.4984Q74.9584 15.2002 73.7545 14.9607Q72.5507 14.7213 71.3365 14.5412Q70.1224 14.3611 68.9009 14.2408Q67.6793 14.1205 66.4534 14.0602Q65.2274 14 64 14M59 89L69 89L69 59L59 59L59 89Z" />
            
        </ResourceDictionary>
    </Application.Resources>

    <Application.Styles>

        <fa:FluentAvaloniaTheme CustomAccentColor="#FF008A00" />

        <StyleInclude Source="avares://IconPacks.Avalonia/Icons.axaml" />
        <StyleInclude Source="avares://LiveMarkdown.Avalonia/Styles.axaml"/>

        <!--  SearchTextBox-Style  -->
        <Style Selector="TextBox.Search">
            <Setter Property="MinHeight" Value="26" />
            <Setter Property="Opacity" Value="0.6" />
            <Setter Property="Padding" Value="4" />
            <Setter Property="CornerRadius" Value="13" />
            <Style Selector="^:focus">
                <Setter Property="Opacity" Value="1" />
            </Style>
        </Style>

    </Application.Styles>
</Application>